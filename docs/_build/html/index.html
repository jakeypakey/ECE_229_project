
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to ECE229_Project’s documentation! &#8212; ECE229_Project June 11, 2021 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-ece229-project-s-documentation">
<h1>Welcome to ECE229_Project’s documentation!<a class="headerlink" href="#welcome-to-ece229-project-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<dl class="py class">
<dt id="utils.accidentDelay.AccidentDelay">
<em class="property">class </em><code class="sig-prename descclassname">utils.accidentDelay.</code><code class="sig-name descname">AccidentDelay</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modelFile</span><span class="o">=</span><span class="default_value">'../data/trainedModelNationwide.pkl'</span></em>, <em class="sig-param"><span class="n">apiKeyFile</span><span class="o">=</span><span class="default_value">'../data/key.pkl'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.accidentDelay.AccidentDelay" title="Permalink to this definition">¶</a></dt>
<dd><p>This class wraps a model which provides an esitmate of the time delay
given an accident occured at a given location</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>string</em>) – the model</p></li>
<li><p><strong>key</strong> – openweather api key</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="utils.accidentDelay.AccidentDelay.distance">
<code class="sig-name descname">distance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.accidentDelay.AccidentDelay.distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the distance between x,y in kilometers using the Haversine formula: <a class="reference external" href="https://en.wikipedia.org/wiki/Haversine_formula">https://en.wikipedia.org/wiki/Haversine_formula</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – lat,lng in degrees</p></li>
<li><p><strong>y</strong> – lat,lng in degrees</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – points not input</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>distnace in kilometers</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.accidentDelay.AccidentDelay.generateExample">
<code class="sig-name descname">generateExample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lng</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weatherDict</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.accidentDelay.AccidentDelay.generateExample" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse and transform weather dictionary from getWeather and use the information to create an example for inference</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>weatherDict</strong> – dictionary with raw json</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – when non dict passed to dict arg</p></li>
<li><p><strong>ValueError</strong> – when lat,lng disagrees with dict</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON with relevant weather data</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>JSON object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.accidentDelay.AccidentDelay.getWeather">
<code class="sig-name descname">getWeather</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lat</span><span class="o">=</span><span class="default_value">32.8800806</span></em>, <em class="sig-param"><span class="n">lng</span><span class="o">=</span><span class="default_value">- 117.237558</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.accidentDelay.AccidentDelay.getWeather" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches weather parameters for the provided latitude and longitude more info at <a class="reference external" href="https://openweathermap.org/current">https://openweathermap.org/current</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> – latitude, defaults to Geisel Library latitude</p></li>
<li><p><strong>lng</strong> – longitude, defaults to Geisel Library longitude</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – when invalid lat lng passed</p></li>
<li><p><strong>TypeError</strong> – when non float input</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON with relevant weather data</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>JSON object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.accidentDelay.AccidentDelay.orderRoutes">
<code class="sig-name descname">orderRoutes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">routeJSON</span></em>, <em class="sig-param"><span class="n">getAll</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.accidentDelay.AccidentDelay.orderRoutes" title="Permalink to this definition">¶</a></dt>
<dd><p>Rates the routes accident time score</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>routeJSON</strong> – raw json from googlemaps</p></li>
<li><p><strong>getAll</strong> – true if all points and values desired</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – when non dictionary input</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>values pertaining to time rating in the order that the routes were ordered inside the routeJSON</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of floats, and values if desired</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.accidentDelay.AccidentDelay.rateRoute">
<code class="sig-name descname">rateRoute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">routeDict</span></em>, <em class="sig-param"><span class="n">getAll</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.accidentDelay.AccidentDelay.rateRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a rating of the time of an accident given one occurs along the route on the route specified</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>routeDict</strong> – the route as a dict</p></li>
<li><p><strong>model</strong> – sklearn model for inference</p></li>
<li><p><strong>getAll</strong> – returns all sample points, along with normalized scores</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – when non dictionary input</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value pertaining to time rating and all scored points if desired</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(scores,allPoints)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-utils.cleaning"></span><dl class="py function">
<dt id="utils.cleaning.getPandasNumeric">
<code class="sig-prename descclassname">utils.cleaning.</code><code class="sig-name descname">getPandasNumeric</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">box</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.cleaning.getPandasNumeric" title="Permalink to this definition">¶</a></dt>
<dd><p>cleans raw data for training
:param df: DataFrame
:param  box: bounding box, if points are to be limited to a single area
:raises TypeError: non dataframe input
:return: cleaned DataFrame
:rtype: DataFrame</p>
</dd></dl>

<span class="target" id="module-All_States_Plots"></span><dl class="py function">
<dt id="All_States_Plots.get_counties">
<code class="sig-prename descclassname">All_States_Plots.</code><code class="sig-name descname">get_counties</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">starter_fip</span></em><span class="sig-paren">)</span><a class="headerlink" href="#All_States_Plots.get_counties" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the geojson dictionary necessary for DASH plot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>starter_fip</strong> (<em>string</em>) – state abbreviation</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="All_States_Plots.plot_double_dropdown_chloropleth">
<code class="sig-prename descclassname">All_States_Plots.</code><code class="sig-name descname">plot_double_dropdown_chloropleth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">processed_data</span></em>, <em class="sig-param"><span class="n">fip_dict</span></em>, <em class="sig-param"><span class="n">fipkey_popvalue</span></em><span class="sig-paren">)</span><a class="headerlink" href="#All_States_Plots.plot_double_dropdown_chloropleth" title="Permalink to this definition">¶</a></dt>
<dd><p>Dash interface - plots heatmap of california vehicle accidents given weather and time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>processed_data</strong> (<em>pd.df</em>) – pandas dataframe of data</p></li>
<li><p><strong>fip_dict</strong> (<em>dict</em>) – all FIP values</p></li>
<li><p><strong>fipkey_popvalue</strong> (<em>dict</em>) – FIP keys to number of accidents values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="All_States_Plots.population_norm">
<code class="sig-prename descclassname">All_States_Plots.</code><code class="sig-name descname">population_norm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">histogram</span></em>, <em class="sig-param"><span class="n">fipkey_popvalue</span></em><span class="sig-paren">)</span><a class="headerlink" href="#All_States_Plots.population_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize histogram by population per 1000 people</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>histogram</strong> (<em>np.array</em>) – Unnormalized histogram</p></li>
<li><p><strong>fipkey_popvalue</strong> (<em>dict</em>) – FIP keys to number of accidents values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="All_States_Plots.processing_data">
<code class="sig-prename descclassname">All_States_Plots.</code><code class="sig-name descname">processing_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">processed_data</span></em>, <em class="sig-param"><span class="n">CA_fip_dict</span></em>, <em class="sig-param"><span class="n">fipkey_popvalue</span></em><span class="sig-paren">)</span><a class="headerlink" href="#All_States_Plots.processing_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the csv file into dataframe of categories vs accidents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>processed_data</strong> (<em>pd.df</em>) – pandas dataframe of data</p></li>
<li><p><strong>CA_fip_dict</strong> (<em>dict</em>) – all FIP values</p></li>
<li><p><strong>fipkey_popvalue</strong> (<em>dict</em>) – FIP keys to number of accidents values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-utils.rawDataVisualizationUtil"></span><dl class="py class">
<dt id="utils.rawDataVisualizationUtil.generateCleanedData">
<em class="property">class </em><code class="sig-prename descclassname">utils.rawDataVisualizationUtil.</code><code class="sig-name descname">generateCleanedData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_filename</span><span class="o">=</span><span class="default_value">'../data/US_Accidents_Dec20.csv'</span></em>, <em class="sig-param"><span class="n">population_filename</span><span class="o">=</span><span class="default_value">'../data/population.xlsx'</span></em>, <em class="sig-param"><span class="n">statenames_filename</span><span class="o">=</span><span class="default_value">'../data/state_name_code_mappings.csv'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.rawDataVisualizationUtil.generateCleanedData" title="Permalink to this definition">¶</a></dt>
<dd><p>This class cleans and organises the original data for the ease of 
fast retrival while fetching values in real time during the usage of Dashboard 
for visualization of accident data in each location and for comparison bar plots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_filename</strong> (<em>str</em>) – excel or csv filename which contains the accident data. Dataset can be downlaoded from <a class="reference external" href="https://www.kaggle.com/sobhanmoosavi/us-accidents">https://www.kaggle.com/sobhanmoosavi/us-accidents</a></p></li>
<li><p><strong>population_filename</strong> (<em>str</em>) – excel or csv filename which contains the population of each state in US. Data can be downloaded from <a class="reference external" href="https://www.census.gov/data/tables/time-series/dec/density-data-text.html">https://www.census.gov/data/tables/time-series/dec/density-data-text.html</a></p></li>
<li><p><strong>statenames_filename</strong> (<em>str</em>) – excel or csv filename which contains state names and the corresponding code names. Data can be downloaded from <a class="reference external" href="https://worldpopulationreview.com/states/state-abbreviations">https://worldpopulationreview.com/states/state-abbreviations</a></p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="utils.rawDataVisualizationUtil.generateCleanedData.convert2levels">
<code class="sig-name descname">convert2levels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.rawDataVisualizationUtil.generateCleanedData.convert2levels" title="Permalink to this definition">¶</a></dt>
<dd><p>This function converts specific features with continuous values to discrete level.
For example: Pressure is quantized to 3 discrete levels (Low: &lt;29.5,Moderate: 29.5-30.2,High: &gt;30.2) and
TimeOfDay is quantized to 3 discrete levels (Day: 6:00-11:59,Noon: 12:00-17:59,Night: 18:00-5:59) etc.,</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.rawDataVisualizationUtil.generateCleanedData.fillnabyDataImputation">
<code class="sig-name descname">fillnabyDataImputation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.rawDataVisualizationUtil.generateCleanedData.fillnabyDataImputation" title="Permalink to this definition">¶</a></dt>
<dd><p>This function uses Imputation function from sklearn to fill in the Nan values in the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.rawDataVisualizationUtil.generateCleanedData.get_processedAccidentLocationFile">
<code class="sig-name descname">get_processedAccidentLocationFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output_filename</span><span class="o">=</span><span class="default_value">'../data/accidents_visualization.csv'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.rawDataVisualizationUtil.generateCleanedData.get_processedAccidentLocationFile" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes the original data and counts the number of accidents that occured 
in each state during each month. 
Also it takes the population information and computed the number of accidents occured per million people.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>output_filename</strong> (<em>str</em>) – csv filename in which the processed data has to be stored</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="utils.rawDataVisualizationUtil.generateCleanedData.get_processedComparisonFile">
<code class="sig-name descname">get_processedComparisonFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output_filename</span><span class="o">=</span><span class="default_value">'../data/comparisons.csv'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.rawDataVisualizationUtil.generateCleanedData.get_processedComparisonFile" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes the original data and counts the number of accidents that occured 
in each state during each month when a particular feature takes a specific value. 
For example: Number of accidents occured in CA in 2017-01 when DayOfWeek is Monday.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>output_filename</strong> (<em>str</em>) – csv filename in which the processed data has to be stored</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None. Stores the generated pandas dataframe into output_filename</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">ECE229_Project</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Aaron Luo, Dyuthi Sristi, Gates Zheng, Jacob Pollard, Steven Wong, Yejun Li.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>